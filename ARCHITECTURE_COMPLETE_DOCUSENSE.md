# ğŸ—ï¸ Architecture ComplÃ¨te - DocuSense AI

## ğŸ“‹ **Vue d'ensemble du systÃ¨me**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DOCUSENSE AI                                       â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   BASE DE       â”‚            â”‚
â”‚  â”‚   (React/TS)    â”‚â—„â”€â”€â–ºâ”‚   (FastAPI)     â”‚â—„â”€â”€â–ºâ”‚   DONNÃ‰ES      â”‚            â”‚
â”‚  â”‚   Port: 3000    â”‚    â”‚   Port: 8000    â”‚    â”‚   (SQLite)      â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ **Flux d'authentification**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend  â”‚    â”‚   Backend   â”‚    â”‚   Database  â”‚    â”‚   JWT Token â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ AuthModal   â”‚â”€â”€â”€â–ºâ”‚ /api/auth/  â”‚â”€â”€â”€â–ºâ”‚ Users Table â”‚â”€â”€â”€â–ºâ”‚ Token Store â”‚
â”‚ Login Form  â”‚    â”‚ login       â”‚    â”‚ Validation  â”‚    â”‚ LocalStorageâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthStore   â”‚    â”‚ JWT Verify  â”‚    â”‚ Role Check  â”‚    â”‚ Auth Header â”‚
â”‚ (Zustand)   â”‚    â”‚ Middleware  â”‚    â”‚ Permissions â”‚    â”‚ All Requestsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ **Gestion des fichiers**

### **Navigation des fichiers**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DiskSelectorâ”‚    â”‚ FileTree    â”‚    â”‚ FileList    â”‚    â”‚ FileViewer  â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ getDrives() â”‚â”€â”€â”€â–ºâ”‚ listDir()   â”‚â”€â”€â”€â–ºâ”‚ getFiles()  â”‚â”€â”€â”€â–ºâ”‚ streamFile()â”‚
â”‚ Drives API  â”‚    â”‚ Directory   â”‚    â”‚ File Info   â”‚    â”‚ File Contentâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/files/ â”‚    â”‚ /api/files/ â”‚    â”‚ /api/files/ â”‚    â”‚ /api/files/ â”‚
â”‚ drives      â”‚    â”‚ list/{path} â”‚    â”‚ info/{id}   â”‚    â”‚ stream/{id} â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Analyse de fichiers**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FileManager â”‚    â”‚ Analysis    â”‚    â”‚ AI Provider â”‚    â”‚ PDF Gen     â”‚
â”‚             â”‚    â”‚ Service     â”‚    â”‚ Service     â”‚    â”‚ Service     â”‚
â”‚ selectFile()â”‚â”€â”€â”€â–ºâ”‚ create()    â”‚â”€â”€â”€â–ºâ”‚ process()   â”‚â”€â”€â”€â–ºâ”‚ generate()  â”‚
â”‚ File Upload â”‚    â”‚ Analysis DB â”‚    â”‚ AI Models   â”‚    â”‚ PDF Output  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/files/ â”‚    â”‚ /api/       â”‚    â”‚ /api/config/â”‚    â”‚ /api/pdf-   â”‚
â”‚ upload      â”‚    â”‚ analysis/   â”‚    â”‚ providers   â”‚    â”‚ files/      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¤– **SystÃ¨me d'analyse IA**

### **Configuration des providers**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ConfigWindowâ”‚    â”‚ ConfigStore â”‚    â”‚ AI Provider â”‚    â”‚ Priority    â”‚
â”‚             â”‚    â”‚             â”‚    â”‚ Manager     â”‚    â”‚ System      â”‚
â”‚ testProviderâ”‚â”€â”€â”€â–ºâ”‚ saveConfig()â”‚â”€â”€â”€â–ºâ”‚ validate()  â”‚â”€â”€â”€â–ºâ”‚ setPriority()â”‚
â”‚ API Keys    â”‚    â”‚ Zustand     â”‚    â”‚ Connection  â”‚    â”‚ Auto/Manual â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/config/â”‚    â”‚ /api/config/â”‚    â”‚ /api/config/â”‚    â”‚ /api/config/â”‚
â”‚ test        â”‚    â”‚ save        â”‚    â”‚ providers   â”‚    â”‚ priority    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Queue d'analyses**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QueueIA     â”‚    â”‚ Analysis    â”‚    â”‚ Background  â”‚    â”‚ Status      â”‚
â”‚ Advanced    â”‚    â”‚ Queue       â”‚    â”‚ Worker      â”‚    â”‚ Monitor     â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ startAnalysisâ”‚â”€â”€â”€â–ºâ”‚ addToQueue()â”‚â”€â”€â”€â–ºâ”‚ processNext()â”‚â”€â”€â”€â–ºâ”‚ updateStatus()â”‚
â”‚ User Action â”‚    â”‚ Database    â”‚    â”‚ AI Service  â”‚    â”‚ Real-time   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/       â”‚    â”‚ /api/       â”‚    â”‚ /api/       â”‚    â”‚ /api/       â”‚
â”‚ analysis/   â”‚    â”‚ analysis/   â”‚    â”‚ analysis/   â”‚    â”‚ analysis/   â”‚
â”‚ start       â”‚    â”‚ queue       â”‚    â”‚ process     â”‚    â”‚ status      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“§ **Gestion des emails**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EmailViewer â”‚    â”‚ EmailParser â”‚    â”‚ Attachment  â”‚    â”‚ Email       â”‚
â”‚             â”‚    â”‚ Service     â”‚    â”‚ Handler     â”‚    â”‚ Display     â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ parseEmail()â”‚â”€â”€â”€â–ºâ”‚ parseFile() â”‚â”€â”€â”€â–ºâ”‚ extract()   â”‚â”€â”€â”€â–ºâ”‚ render()    â”‚
â”‚ .eml File   â”‚    â”‚ MIME Parse  â”‚    â”‚ Attachments â”‚    â”‚ HTML/Text   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/emails/â”‚    â”‚ /api/emails/â”‚    â”‚ /api/emails/â”‚    â”‚ /api/emails/â”‚
â”‚ parse       â”‚    â”‚ preview     â”‚    â”‚ attachment  â”‚    â”‚ display     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›¡ï¸ **SystÃ¨me de sÃ©curitÃ© et logging**

### **Middleware de sÃ©curitÃ©**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Request     â”‚    â”‚ Auth        â”‚    â”‚ Logging     â”‚    â”‚ Security    â”‚
â”‚ Incoming    â”‚    â”‚ Middleware  â”‚    â”‚ Middleware  â”‚    â”‚ Detector    â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ HTTP Requestâ”‚â”€â”€â”€â–ºâ”‚ JWT Verify  â”‚â”€â”€â”€â–ºâ”‚ Log Event   â”‚â”€â”€â”€â–ºâ”‚ Detect      â”‚
â”‚             â”‚    â”‚ User Check  â”‚    â”‚ Database    â”‚    â”‚ Threats     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FastAPI     â”‚    â”‚ /api/auth/  â”‚    â”‚ SystemLogs  â”‚    â”‚ Security    â”‚
â”‚ Router      â”‚    â”‚ verify      â”‚    â”‚ Table       â”‚    â”‚ Events      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Monitoring et logs**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LogService  â”‚    â”‚ SystemLog   â”‚    â”‚ LogViewer   â”‚    â”‚ Admin       â”‚
â”‚ (Frontend)  â”‚    â”‚ Service     â”‚    â”‚ Component   â”‚    â”‚ Dashboard   â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ logEvent()  â”‚â”€â”€â”€â–ºâ”‚ createLog() â”‚â”€â”€â”€â–ºâ”‚ getLogs()   â”‚â”€â”€â”€â–ºâ”‚ viewLogs()  â”‚
â”‚ User Action â”‚    â”‚ Database    â”‚    â”‚ Filter/Sort â”‚    â”‚ Analytics   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/system-â”‚    â”‚ /api/system-â”‚    â”‚ /api/system-â”‚    â”‚ /api/admin/ â”‚
â”‚ logs/event  â”‚    â”‚ logs/create â”‚    â”‚ logs/list   â”‚    â”‚ logs        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”Œ **Gestion de la connexion**

### **Connection Guards**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useBackend  â”‚    â”‚ useBackend  â”‚    â”‚ Conditional â”‚    â”‚ Service     â”‚
â”‚ Status      â”‚    â”‚ Connection  â”‚    â”‚ Request     â”‚    â”‚ Wrappers    â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ checkHealth â”‚â”€â”€â”€â–ºâ”‚ canMakeReq  â”‚â”€â”€â”€â–ºâ”‚ conditional â”‚â”€â”€â”€â–ºâ”‚ API Calls   â”‚
â”‚ Health API  â”‚    â”‚ State Mgmt  â”‚    â”‚ Request()   â”‚    â”‚ Protected   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/health â”‚    â”‚ Connection  â”‚    â”‚ Fallback    â”‚    â”‚ useFile     â”‚
â”‚ Endpoint    â”‚    â”‚ State       â”‚    â”‚ Values      â”‚    â”‚ Service     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š **Stores et Ã©tat global**

### **Zustand Stores**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthStore   â”‚    â”‚ ConfigStore â”‚    â”‚ Analysis    â”‚    â”‚ FileStore   â”‚
â”‚             â”‚    â”‚             â”‚    â”‚ Store       â”‚    â”‚             â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ user, token â”‚    â”‚ providers   â”‚    â”‚ queue,      â”‚    â”‚ files,      â”‚
â”‚ login/logoutâ”‚    â”‚ priorities  â”‚    â”‚ status      â”‚    â”‚ selection   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UIStore     â”‚    â”‚ PromptStore â”‚    â”‚ Backend     â”‚    â”‚ UIState     â”‚
â”‚             â”‚    â”‚             â”‚    â”‚ Connection  â”‚    â”‚             â”‚
â”‚ modals,     â”‚    â”‚ prompts,    â”‚    â”‚ Store       â”‚    â”‚ theme,      â”‚
â”‚ panels      â”‚    â”‚ templates   â”‚    â”‚ connection  â”‚    â”‚ layout      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ **Points d'optimisation identifiÃ©s**

### **1. Doublons potentiels**
- âŒ **Services API** : `fileService.ts` vs `analysisService.ts` - fonctions similaires
- âŒ **Middleware** : `AuthMiddleware` vs `LoggingMiddleware` - logique d'auth rÃ©pÃ©tÃ©e
- âŒ **Validation** : Validation de fichiers dans plusieurs endroits

### **2. Code mort potentiel**
- âŒ **Ancien systÃ¨me d'auth** : `security_manager` supprimÃ© mais rÃ©fÃ©rences restantes
- âŒ **Fonctions de duplication** : SupprimÃ©es mais composants UI encore prÃ©sents
- âŒ **Logs de debug** : Nombreux `console.log` non nettoyÃ©s

### **3. Refactorisation possible**
- ğŸ”„ **Services centralisÃ©s** : Unifier tous les services API
- ğŸ”„ **Validation centralisÃ©e** : CrÃ©er un systÃ¨me de validation unifiÃ©
- ğŸ”„ **Error handling** : Standardiser la gestion d'erreurs
- ğŸ”„ **Type definitions** : Centraliser les types TypeScript

### **4. SÃ©curitÃ© Ã  renforcer**
- ğŸ”’ **Rate limiting** : Limiter les appels API par utilisateur
- ğŸ”’ **Input validation** : Validation plus stricte des entrÃ©es
- ğŸ”’ **CORS policy** : Configurer CORS de maniÃ¨re plus restrictive
- ğŸ”’ **SQL injection** : VÃ©rifier toutes les requÃªtes SQL
- ğŸ”’ **File upload** : Validation plus stricte des fichiers uploadÃ©s

## ğŸ“ˆ **MÃ©triques de performance**

### **Backend**
- **Endpoints** : ~25 endpoints API
- **Middleware** : 3 middlewares actifs
- **Services** : 8 services principaux
- **Base de donnÃ©es** : 6 tables principales

### **Frontend**
- **Composants** : ~30 composants React
- **Hooks** : 8 hooks personnalisÃ©s
- **Stores** : 7 stores Zustand
- **Services** : 5 services API

## ğŸš€ **Recommandations d'optimisation**

### **PrioritÃ© Haute**
1. **Unifier les services API** - Ã‰liminer les doublons
2. **Centraliser la validation** - SystÃ¨me unifiÃ©
3. **Nettoyer le code mort** - Supprimer les rÃ©fÃ©rences inutiles
4. **Standardiser l'error handling** - Gestion d'erreurs uniforme

### **PrioritÃ© Moyenne**
1. **Optimiser les requÃªtes DB** - Index et requÃªtes
2. **AmÃ©liorer le caching** - Cache des donnÃ©es frÃ©quentes
3. **RÃ©duire les re-renders** - Optimisation React
4. **Bundle optimization** - RÃ©duire la taille du bundle

### **PrioritÃ© Basse**
1. **Tests unitaires** - Couverture de tests
2. **Documentation** - Documentation API
3. **Monitoring** - MÃ©triques de performance
4. **CI/CD** - Pipeline de dÃ©ploiement

---

## ğŸ¯ **Conclusion**

L'architecture est **solide** mais prÃ©sente des **opportunitÃ©s d'optimisation** importantes. Les guards de connexion et le systÃ¨me de logging sont **excellents**, mais il faut **nettoyer les doublons** et **centraliser les services** pour une maintenance optimale.
